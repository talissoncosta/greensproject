{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Set from \"@babel/runtime-corejs2/core-js/set\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"/home/tcostaz1/Documentos/DEV/fullstack-challenge-06/dashboard/components/Table.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { Button, ButtonGroup, Container, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Snackbar } from '@material-ui/core';\nimport { Delete } from '@material-ui/icons';\nimport MUIDataTable from \"mui-datatables\";\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport ModalEdit from './ModalEdit';\nimport fetch from 'unfetch';\nimport useSWR from 'swr';\nimport moment from 'moment';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport { fetcher, remove } from '../services/api';\n\nfunction Alert(props) {\n  return __jsx(MuiAlert, _extends({\n    elevation: 6,\n    variant: \"filled\"\n  }, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }));\n}\n\nvar options = {\n  print: false,\n  selectableRows: false,\n  responsive: 'stacked'\n};\nexport default function TableProducts(_ref) {\n  var _jsx, _jsx2;\n\n  var updateTable = _ref.updateTable;\n\n  var _useState = useState([]),\n      tableData = _useState[0],\n      setTableData = _useState[1];\n\n  var _useState2 = useState(false),\n      openDialog = _useState2[0],\n      setOpenDialog = _useState2[1];\n\n  var _useState3 = useState(''),\n      itemSelected = _useState3[0],\n      setItemSelected = _useState3[1];\n\n  var _useState4 = useState(false),\n      openModal = _useState4[0],\n      setOpenModal = _useState4[1];\n\n  var _useState5 = useState([]),\n      types = _useState5[0],\n      setTypes = _useState5[1];\n\n  var _useState6 = useState(false),\n      openSnackSuccess = _useState6[0],\n      setOpenSnack = _useState6[1];\n\n  var _useState7 = useState(false),\n      tableUpdate = _useState7[0],\n      setTableUpdate = _useState7[1];\n\n  function handleData(data) {\n    var arr, arrType;\n    return _regeneratorRuntime.async(function handleData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            arr = [];\n            arrType = [];\n            data.forEach(function (el) {\n              arrType.push(el.type);\n              arr.push([el._id, el.title, el.type, el.rating, el.price, moment(el.createdAt).format('YYYY-MM-DD HH:mm:ss'), el.height, el.width, el.description]);\n            });\n            setTypes(_toConsumableArray(new _Set(arrType)));\n            return _context.abrupt(\"return\", arr);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  }\n\n  function handleUpdateTable() {\n    return _regeneratorRuntime.async(function handleUpdateTable$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setTableUpdate(!tableUpdate);\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  }\n\n  ;\n\n  function confirmDelete(id) {\n    return _regeneratorRuntime.async(function confirmDelete$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            setItemSelected(id);\n            setOpenDialog(true);\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  }\n\n  ;\n\n  var handleOpenSnack = function handleOpenSnack() {\n    setOpenSnack(true);\n  };\n\n  var handleCloseSnackSuccess = function handleCloseSnackSuccess() {\n    console.log(\"types\", types);\n    setOpenSnack(false);\n  };\n\n  function editProduct(id) {\n    return _regeneratorRuntime.async(function editProduct$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            console.log(id);\n            setItemSelected(id);\n            setOpenModal(true);\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    });\n  }\n\n  ;\n\n  function handleCloseDialog() {\n    return _regeneratorRuntime.async(function handleCloseDialog$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            setOpenDialog(false);\n\n          case 1:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    });\n  }\n\n  ;\n\n  function deleteProduct() {\n    var response;\n    return _regeneratorRuntime.async(function deleteProduct$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            console.log(\"REMOVER PRODUTO\", itemSelected);\n            _context6.next = 3;\n            return _regeneratorRuntime.awrap(remove(\"/products/\".concat(itemSelected)));\n\n          case 3:\n            response = _context6.sent;\n\n            if (response.success) {\n              setOpenSnack(true);\n              handleUpdateTable();\n            } else {}\n\n            setOpenDialog(false);\n\n          case 6:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    });\n  }\n\n  ;\n  var columns = [{\n    name: \"Id\",\n    options: {\n      display: false,\n      download: false\n    }\n  }, {\n    name: \"Title\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Type\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Rating\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Price\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Created\",\n    options: {\n      filter: true,\n      sort: true\n    }\n  }, {\n    name: \"Height\",\n    options: {\n      filter: true,\n      sorte: true,\n      display: false\n    }\n  }, {\n    name: \"Width\",\n    options: {\n      filter: true,\n      sorte: true,\n      display: false\n    }\n  }, {\n    name: \"Description\",\n    options: {\n      filter: true,\n      sort: true,\n      display: false\n    }\n  }, {\n    name: \"Action\",\n    options: {\n      filter: false,\n      sort: false,\n      empty: true,\n      download: false,\n      customBodyRender: function customBodyRender(value, tableMeta, updateValue) {\n        return __jsx(ButtonGroup, {\n          color: \"primary\",\n          \"aria-label\": \"outlined button group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, __jsx(Button, {\n          onClick: function onClick() {\n            return editProduct(tableMeta.rowData[0]);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, \"Edit\"), __jsx(Button, {\n          onClick: function onClick() {\n            return confirmDelete(tableMeta.rowData[0]);\n          },\n          color: \"secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, \"Delete\"));\n      }\n    }\n  }];\n\n  function fetchData() {\n    var response;\n    return _regeneratorRuntime.async(function fetchData$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return _regeneratorRuntime.awrap(fetcher(\"/products\"));\n\n          case 2:\n            response = _context7.sent;\n            console.log(\"a\" + response);\n            _context7.t0 = setTableData;\n            _context7.next = 7;\n            return _regeneratorRuntime.awrap(handleData(response));\n\n          case 7:\n            _context7.t1 = _context7.sent;\n            (0, _context7.t0)(_context7.t1);\n\n          case 9:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    });\n  }\n\n  useEffect(function () {\n    console.log(\"atualiza a pag\");\n    fetchData();\n  }, [updateTable || tableUpdate]);\n  useEffect(function () {\n    fetchData();\n  }, []);\n  return __jsx(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, __jsx(ModalEdit, {\n    open: openModal,\n    setOpen: setOpenModal,\n    types: types,\n    item: itemSelected,\n    setUpdateTable: handleUpdateTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }), __jsx(MuiThemeProvider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, __jsx(MUIDataTable, {\n    title: \"Products List\",\n    data: tableData,\n    columns: columns,\n    options: options,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  })), __jsx(Dialog, {\n    open: openDialog,\n    onClose: handleCloseDialog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, __jsx(DialogTitle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, \"Delete\"), __jsx(DialogContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, __jsx(DialogContentText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, \"Are you sure you want to delete this product?\")), __jsx(DialogActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, __jsx(Button, (_jsx = {\n    color: \"error\",\n    autoFocus: true,\n    onClick: handleCloseDialog\n  }, _defineProperty(_jsx, \"color\", \"primary\"), _defineProperty(_jsx, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 209\n  }), _defineProperty(_jsx, \"__self\", this), _jsx), \"Cancel\"), __jsx(Button, (_jsx2 = {\n    color: \"success\",\n    onClick: deleteProduct\n  }, _defineProperty(_jsx2, \"color\", \"primary\"), _defineProperty(_jsx2, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 212\n  }), _defineProperty(_jsx2, \"__self\", this), _jsx2), \"Confirm\"))), __jsx(Snackbar, {\n    open: openSnackSuccess,\n    autoHideDuration: 3000,\n    onClose: handleCloseSnackSuccess,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, __jsx(Alert, {\n    severity: \"success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, \"Sucess! The product was succesfully deleted!\")), __jsx(Snackbar, {\n    open: openSnackError,\n    autoHideDuration: 3000,\n    onClose: handleCloseSnackError,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }, __jsx(Alert, {\n    severity: \"error\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }, \"Failed to delete the product!\")));\n}\n;","map":{"version":3,"sources":["/home/tcostaz1/Documentos/DEV/fullstack-challenge-06/dashboard/components/Table.js"],"names":["React","useEffect","useState","Button","ButtonGroup","Container","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Snackbar","Delete","MUIDataTable","createMuiTheme","MuiThemeProvider","ModalEdit","fetch","useSWR","moment","MuiAlert","fetcher","remove","Alert","props","options","print","selectableRows","responsive","TableProducts","updateTable","tableData","setTableData","openDialog","setOpenDialog","itemSelected","setItemSelected","openModal","setOpenModal","types","setTypes","openSnackSuccess","setOpenSnack","tableUpdate","setTableUpdate","handleData","data","arr","arrType","forEach","el","push","type","_id","title","rating","price","createdAt","format","height","width","description","handleUpdateTable","confirmDelete","id","handleOpenSnack","handleCloseSnackSuccess","console","log","editProduct","handleCloseDialog","deleteProduct","response","success","columns","name","display","download","filter","sort","sorte","empty","customBodyRender","value","tableMeta","updateValue","rowData","fetchData","openSnackError","handleCloseSnackError"],"mappings":"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","sourcesContent":["import React, {useEffect,useState} from 'react'\nimport {Button,ButtonGroup,Container,Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle,Snackbar} from '@material-ui/core';\nimport { Delete } from '@material-ui/icons';\nimport MUIDataTable from \"mui-datatables\";\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport ModalEdit from './ModalEdit';\nimport fetch from 'unfetch'\nimport useSWR from 'swr'\nimport moment from 'moment'\nimport MuiAlert from '@material-ui/lab/Alert';\nimport {fetcher,remove} from '../services/api'\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nconst options = {\n  print:false,\n  selectableRows:false,\n  responsive:'stacked'\n};\n \nexport default function TableProducts({updateTable}){\n  const [tableData, setTableData] = useState([]);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [itemSelected, setItemSelected] = useState('');\n  const [openModal, setOpenModal] = useState(false);\n  const [types, setTypes] = useState([]);\n  const [openSnackSuccess, setOpenSnack] = useState(false);\n  const [tableUpdate,setTableUpdate] = useState(false);\n      async function handleData(data) {\n        let arr = [];\n        let arrType = [];\n        data.forEach(el => {\n          arrType.push(el.type);\n          arr.push([\n            el._id,\n            el.title,\n            el.type,\n            el.rating,\n            el.price,\n            moment(el.createdAt).format('YYYY-MM-DD HH:mm:ss'),\n            el.height,\n            el.width,\n            el.description,\n          ])\n        });\n        setTypes([...new Set(arrType)])\n        return arr;\n      }\n      async function handleUpdateTable(){\n        setTableUpdate(!tableUpdate)\n      };\n      async function confirmDelete(id){\n        setItemSelected(id);\n        setOpenDialog(true);\n      };\n\n      const handleOpenSnack = () => {\n          setOpenSnack(true);\n      };\n\n      const handleCloseSnackSuccess = () => {\n          console.log(\"types\",types)\n          setOpenSnack(false);\n      };\n      async function editProduct(id) {\n        console.log(id)\n        setItemSelected(id);\n        setOpenModal(true);\n\n      };\n      async function handleCloseDialog(){\n        setOpenDialog(false);\n      };\n      async function deleteProduct(){\n        console.log(\"REMOVER PRODUTO\",itemSelected)\n        const response = await remove(`/products/${itemSelected}`);\n        if(response.success){\n          setOpenSnack(true)\n          handleUpdateTable();\n        }else{\n\n        }\n        setOpenDialog(false);\n      };\n     const columns = [\n\n      {\n        name: \"Id\",\n        options: {\n          display: false,\n          download:false\n        }\n      },\n      {\n        name: \"Title\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Type\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Rating\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Price\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Created\",\n        options: {\n          filter: true,\n          sort: true,\n        }\n      },{\n        name: \"Height\",\n        options: {\n          filter: true,\n          sorte:true,\n          display:false\n        }\n      }, {\n        name: \"Width\",\n        options: {\n          filter: true,\n          sorte:true,\n          display:false\n        }\n      }, {\n        name: \"Description\",\n        options: {\n          filter: true,\n          sort: true,\n          display:false\n        }\n      },\n      {\n        name: \"Action\",\n        options: {\n          filter: false,\n          sort: false,\n          empty: true,\n          download:false,\n          customBodyRender: (value, tableMeta, updateValue) => {\n            return (\n              <ButtonGroup color=\"primary\" aria-label=\"outlined button group\">\n                <Button onClick={() => editProduct(tableMeta.rowData[0])} >Edit</Button>\n                <Button onClick={() => confirmDelete(tableMeta.rowData[0])} color=\"secondary\">Delete</Button>\n              </ButtonGroup>\n\n            );\n          }\n        }\n      },\n    ];\n  async function fetchData() {\n    // You can await here\n    const response = await fetcher(`/products`);\n    console.log(\"a\" + response)\n    setTableData(await handleData(response));\n  }\n  useEffect(() => {\n\n    console.log(\"atualiza a pag\")\n    fetchData();\n}, [updateTable || tableUpdate]);\n  useEffect(() => {\n\n      fetchData();\n     \n  }, []);\n  return (\n    \n    <Container>\n      <ModalEdit open={openModal} setOpen={setOpenModal} types={types} item={itemSelected} setUpdateTable={handleUpdateTable}/>\n      <MuiThemeProvider>\n        <MUIDataTable \n          title={\"Products List\"} \n          data={tableData} \n          columns={columns} \n          options={options} \n        />\n      </MuiThemeProvider>\n\n      <Dialog\n        open={openDialog}\n        onClose={handleCloseDialog}\n      >\n        <DialogTitle >\n         Delete\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Are you sure you want to delete this product?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button color=\"error\" autoFocus onClick={handleCloseDialog} color=\"primary\">\n            Cancel\n          </Button>\n          <Button color=\"success\" onClick={deleteProduct} color=\"primary\">\n            Confirm\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <Snackbar open={openSnackSuccess} autoHideDuration={3000} onClose={handleCloseSnackSuccess} >\n          <Alert  severity=\"success\">\n              Sucess! The product was succesfully deleted!\n          </Alert>\n      </Snackbar>\n      <Snackbar open={openSnackError} autoHideDuration={3000} onClose={handleCloseSnackError} >\n          <Alert  severity=\"error\">\n              Failed to delete the product!\n          </Alert>\n      </Snackbar>\n    </Container>\n  )\n};\n\n"]},"metadata":{},"sourceType":"module"}