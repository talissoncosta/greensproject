{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Set from \"@babel/runtime-corejs2/core-js/set\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"/usr/src/dashboard/components/Table.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { Button, ButtonGroup, Container, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Snackbar } from '@material-ui/core';\nimport { Delete, Edit } from '@material-ui/icons';\nimport MUIDataTable from \"mui-datatables\";\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport ModalEdit from './ModalEdit';\nimport moment from 'moment';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport { fetcher, remove } from '../services/api';\n\nfunction Alert(props) {\n  return __jsx(MuiAlert, _extends({\n    elevation: 6,\n    variant: \"filled\"\n  }, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }));\n}\n\nvar options = {\n  print: false,\n  selectableRows: false,\n  responsive: 'stacked'\n};\nexport default function TableProducts(_ref) {\n  var _jsx, _jsx2;\n\n  var updateTable = _ref.updateTable;\n\n  var _useState = useState([]),\n      tableData = _useState[0],\n      setTableData = _useState[1];\n\n  var _useState2 = useState(false),\n      openDialog = _useState2[0],\n      setOpenDialog = _useState2[1];\n\n  var _useState3 = useState(''),\n      itemSelected = _useState3[0],\n      setItemSelected = _useState3[1];\n\n  var _useState4 = useState(false),\n      openModal = _useState4[0],\n      setOpenModal = _useState4[1];\n\n  var _useState5 = useState([]),\n      types = _useState5[0],\n      setTypes = _useState5[1];\n\n  var _useState6 = useState(false),\n      openSnackSuccess = _useState6[0],\n      setOpenSnack = _useState6[1];\n\n  var _useState7 = useState(false),\n      openSnackError = _useState7[0],\n      setOpenSnackError = _useState7[1];\n\n  var _useState8 = useState(false),\n      tableUpdate = _useState8[0],\n      setTableUpdate = _useState8[1];\n\n  function handleData(data) {\n    var arr, arrType;\n    return _regeneratorRuntime.async(function handleData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(data.length < 1)) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            arr = [];\n            arrType = [];\n            data.forEach(function (el) {\n              arrType.push(el.type);\n              arr.push([el._id, el.title, el.type, el.rating, el.price, moment(el.createdAt).format('YYYY-MM-DD HH:mm:ss'), el.height, el.width, el.description]);\n            });\n            setTypes(_toConsumableArray(new _Set(arrType)));\n            return _context.abrupt(\"return\", arr);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  }\n\n  function handleUpdateTable() {\n    return _regeneratorRuntime.async(function handleUpdateTable$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setTableUpdate(!tableUpdate);\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  }\n\n  ;\n\n  function confirmDelete(id) {\n    return _regeneratorRuntime.async(function confirmDelete$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            setItemSelected(id);\n            setOpenDialog(true);\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  }\n\n  ;\n\n  var handleCloseSnackError = function handleCloseSnackError() {\n    setOpenSnackError(false);\n  };\n\n  var handleCloseSnackSuccess = function handleCloseSnackSuccess() {\n    setOpenSnack(false);\n  };\n\n  function editProduct(id) {\n    return _regeneratorRuntime.async(function editProduct$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            setItemSelected(id);\n            setOpenModal(true);\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    });\n  }\n\n  ;\n\n  function handleCloseDialog() {\n    return _regeneratorRuntime.async(function handleCloseDialog$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            setOpenDialog(false);\n\n          case 1:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    });\n  }\n\n  ;\n\n  function deleteProduct() {\n    var response;\n    return _regeneratorRuntime.async(function deleteProduct$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return _regeneratorRuntime.awrap(remove(\"/products/\".concat(itemSelected)));\n\n          case 2:\n            response = _context6.sent;\n\n            if (response.success) {\n              setOpenSnack(true);\n              handleUpdateTable();\n            } else {\n              setOpenSnackError(true);\n            }\n\n            setOpenDialog(false);\n\n          case 5:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    });\n  }\n\n  ;\n  var columns = [{\n    name: \"Id\",\n    options: {\n      display: false,\n      download: false\n    }\n  }, {\n    name: \"Title\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Type\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Rating\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Price\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Created\",\n    options: {\n      filter: true,\n      sort: true\n    }\n  }, {\n    name: \"Height\",\n    options: {\n      filter: true,\n      sorte: true,\n      display: false\n    }\n  }, {\n    name: \"Width\",\n    options: {\n      filter: true,\n      sorte: true,\n      display: false\n    }\n  }, {\n    name: \"Description\",\n    options: {\n      filter: true,\n      sort: true,\n      display: false\n    }\n  }, {\n    name: \"Action\",\n    options: {\n      filter: false,\n      sort: false,\n      empty: true,\n      download: false,\n      customBodyRender: function customBodyRender(value, tableMeta, updateValue) {\n        return __jsx(ButtonGroup, {\n          color: \"primary\",\n          \"aria-label\": \"outlined button group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, __jsx(Button, {\n          onClick: function onClick() {\n            return editProduct(tableMeta.rowData[0]);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, \" \", __jsx(Edit, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }), \"Edit\"), __jsx(Button, {\n          onClick: function onClick() {\n            return confirmDelete(tableMeta.rowData[0]);\n          },\n          color: \"secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, __jsx(Delete, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }), \"Delete\"));\n      }\n    }\n  }];\n\n  function fetchData() {\n    var response;\n    return _regeneratorRuntime.async(function fetchData$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return _regeneratorRuntime.awrap(fetcher(\"/products\"));\n\n          case 2:\n            response = _context7.sent;\n            _context7.t0 = setTableData;\n            _context7.next = 6;\n            return _regeneratorRuntime.awrap(handleData(response));\n\n          case 6:\n            _context7.t1 = _context7.sent;\n            (0, _context7.t0)(_context7.t1);\n\n          case 8:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    });\n  }\n\n  useEffect(function () {\n    fetchData();\n  }, [updateTable || tableUpdate]); // useEffect(() => {\n  //     fetchData();\n  // }, []);\n\n  return __jsx(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, __jsx(ModalEdit, {\n    open: openModal,\n    setOpen: setOpenModal,\n    types: types,\n    item: itemSelected,\n    setUpdateTable: handleUpdateTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }), __jsx(MUIDataTable, {\n    title: \"Products List\",\n    data: tableData,\n    columns: columns,\n    options: options,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }), __jsx(Dialog, {\n    open: openDialog,\n    onClose: handleCloseDialog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, __jsx(DialogTitle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, \"Delete\"), __jsx(DialogContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, __jsx(DialogContentText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, \"Are you sure you want to delete this product?\")), __jsx(DialogActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, __jsx(Button, (_jsx = {\n    color: \"error\",\n    autoFocus: true,\n    onClick: handleCloseDialog\n  }, _defineProperty(_jsx, \"color\", \"primary\"), _defineProperty(_jsx, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 197\n  }), _defineProperty(_jsx, \"__self\", this), _jsx), \"Cancel\"), __jsx(Button, (_jsx2 = {\n    color: \"success\",\n    onClick: deleteProduct\n  }, _defineProperty(_jsx2, \"color\", \"primary\"), _defineProperty(_jsx2, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 200\n  }), _defineProperty(_jsx2, \"__self\", this), _jsx2), \"Confirm\"))), __jsx(Snackbar, {\n    open: openSnackSuccess,\n    autoHideDuration: 3000,\n    onClose: handleCloseSnackSuccess,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, __jsx(Alert, {\n    severity: \"success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, \"Sucess! The product was succesfully deleted!\")), __jsx(Snackbar, {\n    open: openSnackError,\n    autoHideDuration: 3000,\n    onClose: handleCloseSnackError,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, __jsx(Alert, {\n    severity: \"error\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, \"Failed to delete the product!\")));\n}\n;","map":{"version":3,"sources":["/usr/src/dashboard/components/Table.js"],"names":["React","useEffect","useState","Button","ButtonGroup","Container","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Snackbar","Delete","Edit","MUIDataTable","MuiThemeProvider","ModalEdit","moment","MuiAlert","fetcher","remove","Alert","props","options","print","selectableRows","responsive","TableProducts","updateTable","tableData","setTableData","openDialog","setOpenDialog","itemSelected","setItemSelected","openModal","setOpenModal","types","setTypes","openSnackSuccess","setOpenSnack","openSnackError","setOpenSnackError","tableUpdate","setTableUpdate","handleData","data","length","arr","arrType","forEach","el","push","type","_id","title","rating","price","createdAt","format","height","width","description","handleUpdateTable","confirmDelete","id","handleCloseSnackError","handleCloseSnackSuccess","editProduct","handleCloseDialog","deleteProduct","response","success","columns","name","display","download","filter","sort","sorte","empty","customBodyRender","value","tableMeta","updateValue","rowData","fetchData"],"mappings":"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","sourcesContent":["import React, {useEffect,useState} from 'react'\nimport {Button,ButtonGroup,Container,Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle,Snackbar} from '@material-ui/core';\nimport { Delete,Edit } from '@material-ui/icons';\nimport MUIDataTable from \"mui-datatables\";\nimport {MuiThemeProvider } from '@material-ui/core/styles';\nimport ModalEdit from './ModalEdit';\nimport moment from 'moment'\nimport MuiAlert from '@material-ui/lab/Alert';\nimport {fetcher,remove} from '../services/api'\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nconst options = {\n  print:false,\n  selectableRows:false,\n  responsive:'stacked'\n};\n \nexport default function TableProducts({updateTable}){\n  const [tableData, setTableData] = useState([]);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [itemSelected, setItemSelected] = useState('');\n  const [openModal, setOpenModal] = useState(false);\n  const [types, setTypes] = useState([]);\n  const [openSnackSuccess, setOpenSnack] = useState(false);\n  const [openSnackError, setOpenSnackError] = useState(false);\n  const [tableUpdate,setTableUpdate] = useState(false);\n      async function handleData(data) {\n        if(data.length < 1) return;\n        let arr = [];\n        let arrType = [];\n        data.forEach(el => {\n          arrType.push(el.type);\n          arr.push([\n            el._id,\n            el.title,\n            el.type,\n            el.rating,\n            el.price,\n            moment(el.createdAt).format('YYYY-MM-DD HH:mm:ss'),\n            el.height,\n            el.width,\n            el.description,\n          ])\n        });\n        setTypes([...new Set(arrType)])\n        return arr;\n      }\n      async function handleUpdateTable(){\n        setTableUpdate(!tableUpdate)\n      };\n      async function confirmDelete(id){\n        setItemSelected(id);\n        setOpenDialog(true);\n      };\n      const handleCloseSnackError = () => {\n        setOpenSnackError(false);\n    };\n      const handleCloseSnackSuccess = () => {\n          setOpenSnack(false);\n      };\n      async function editProduct(id) {\n        setItemSelected(id);\n        setOpenModal(true);\n\n      };\n      async function handleCloseDialog(){\n        setOpenDialog(false);\n      };\n      async function deleteProduct(){\n        const response = await remove(`/products/${itemSelected}`);\n        if(response.success){\n          setOpenSnack(true)\n          handleUpdateTable();\n        }else{\n          setOpenSnackError(true)\n        }\n        setOpenDialog(false);\n      };\n     const columns = [\n\n      {\n        name: \"Id\",\n        options: {\n          display: false,\n          download:false\n        }\n      },\n      {\n        name: \"Title\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Type\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Rating\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Price\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Created\",\n        options: {\n          filter: true,\n          sort: true,\n        }\n      },{\n        name: \"Height\",\n        options: {\n          filter: true,\n          sorte:true,\n          display:false\n        }\n      }, {\n        name: \"Width\",\n        options: {\n          filter: true,\n          sorte:true,\n          display:false\n        }\n      }, {\n        name: \"Description\",\n        options: {\n          filter: true,\n          sort: true,\n          display:false\n        }\n      },\n      {\n        name: \"Action\",\n        options: {\n          filter: false,\n          sort: false,\n          empty: true,\n          download:false,\n          customBodyRender: (value, tableMeta, updateValue) => {\n            return (\n              <ButtonGroup color=\"primary\" aria-label=\"outlined button group\">\n                <Button onClick={() => editProduct(tableMeta.rowData[0])} > <Edit/>Edit</Button>\n                <Button onClick={() => confirmDelete(tableMeta.rowData[0])} color=\"secondary\"><Delete/>Delete</Button>\n              </ButtonGroup>\n\n            );\n          }\n        }\n      },\n    ];\n  async function fetchData() {\n    const response = await fetcher(`/products`);\n    setTableData(await handleData(response));\n  }\n  useEffect(() => {\n      fetchData();\n  }, [updateTable || tableUpdate]);\n\n  // useEffect(() => {\n  //     fetchData();\n  // }, []);\n  return (\n    \n    <Container>\n      <ModalEdit open={openModal} setOpen={setOpenModal} types={types} item={itemSelected} setUpdateTable={handleUpdateTable}/>\n        <MUIDataTable \n          title={\"Products List\"} \n          data={tableData} \n          columns={columns} \n          options={options} \n        />\n\n      <Dialog\n        open={openDialog}\n        onClose={handleCloseDialog}\n      >\n        <DialogTitle >\n         Delete\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Are you sure you want to delete this product?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button color=\"error\" autoFocus onClick={handleCloseDialog} color=\"primary\">\n            Cancel\n          </Button>\n          <Button color=\"success\" onClick={deleteProduct} color=\"primary\">\n            Confirm\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <Snackbar open={openSnackSuccess} autoHideDuration={3000} onClose={handleCloseSnackSuccess} >\n          <Alert  severity=\"success\">\n              Sucess! The product was succesfully deleted!\n          </Alert>\n      </Snackbar>\n      <Snackbar open={openSnackError} autoHideDuration={3000} onClose={handleCloseSnackError} >\n          <Alert  severity=\"error\">\n              Failed to delete the product!\n          </Alert>\n      </Snackbar>\n    </Container>\n  )\n};\n\n"]},"metadata":{},"sourceType":"module"}