{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Set from \"@babel/runtime-corejs2/core-js/set\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"/home/tcostaz1/Documentos/DEV/fullstack-challenge-06/dashboard/components/Table.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { Button, ButtonGroup, Container, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Snackbar } from '@material-ui/core';\nimport { Delete } from '@material-ui/icons';\nimport MUIDataTable from \"mui-datatables\";\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport ModalEdit from './ModalEdit';\nimport api from '../services/api';\nimport fetch from 'unfetch';\nimport useSWR from 'swr';\nimport moment from 'moment';\nimport MuiAlert from '@material-ui/lab/Alert';\n\nfunction Alert(props) {\n  return __jsx(MuiAlert, _extends({\n    elevation: 6,\n    variant: \"filled\"\n  }, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }));\n}\n\nvar API_URL = 'http://localhost:3001';\n\nfunction fetcher(path) {\n  var res, json;\n  return _regeneratorRuntime.async(function fetcher$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(fetch(API_URL + path));\n\n        case 2:\n          res = _context.sent;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(res.json());\n\n        case 5:\n          json = _context.sent;\n          return _context.abrupt(\"return\", json);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nvar options = {\n  print: false,\n  selectableRows: false,\n  responsive: 'stacked'\n};\nexport default function TableProducts() {\n  var _jsx, _jsx2;\n\n  var _useState = useState([]),\n      tableData = _useState[0],\n      setTableData = _useState[1];\n\n  var _useState2 = useState(false),\n      openDialog = _useState2[0],\n      setOpenDialog = _useState2[1];\n\n  var _useState3 = useState(''),\n      itemSelected = _useState3[0],\n      setItemSelected = _useState3[1];\n\n  var _useState4 = useState(false),\n      openModal = _useState4[0],\n      setOpenModal = _useState4[1];\n\n  var _useState5 = useState([]),\n      types = _useState5[0],\n      setTypes = _useState5[1];\n\n  var _useState6 = useState(false),\n      openSnackSuccess = _useState6[0],\n      setOpenSnack = _useState6[1];\n\n  function handleData(data) {\n    var arr, arrType;\n    return _regeneratorRuntime.async(function handleData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            arr = [];\n            arrType = [];\n            data.forEach(function (el) {\n              arrType.push(el.type);\n              arr.push([el._id, el.title, el.type, el.rating, el.price, moment(el.createdAt).format('YYYY-MM-DD HH:mm:ss'), el.height, el.width, el.description]);\n            });\n            setTypes(_toConsumableArray(new _Set(arrType)));\n            return _context2.abrupt(\"return\", arr);\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  }\n\n  function confirmDelete(id) {\n    return _regeneratorRuntime.async(function confirmDelete$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            setItemSelected(id);\n            setOpenDialog(true);\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  }\n\n  ;\n\n  var handleOpenSnack = function handleOpenSnack() {\n    setOpenSnack(true);\n  };\n\n  var handleCloseSnackSuccess = function handleCloseSnackSuccess() {\n    console.log(\"types\", types);\n    setOpenSnack(false);\n  };\n\n  function editProduct(id) {\n    return _regeneratorRuntime.async(function editProduct$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            console.log(id);\n            setItemSelected(id);\n            setOpenModal(true);\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    });\n  }\n\n  ;\n\n  function handleCloseDialog() {\n    return _regeneratorRuntime.async(function handleCloseDialog$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            setOpenDialog(false);\n\n          case 1:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    });\n  }\n\n  ;\n\n  function deleteProduct() {\n    return _regeneratorRuntime.async(function deleteProduct$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            console.log(\"REMOVER PRODUTO\", itemSelected);\n            setOpenSnack(true);\n            setOpenDialog(false);\n\n          case 3:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    });\n  }\n\n  ;\n  var columns = [{\n    name: \"Id\",\n    options: {\n      display: false,\n      download: false\n    }\n  }, {\n    name: \"Title\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Type\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Rating\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Price\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"Created\",\n    options: {\n      filter: true,\n      sort: true\n    }\n  }, {\n    name: \"Height\",\n    options: {\n      filter: true,\n      sorte: true,\n      display: false\n    }\n  }, {\n    name: \"Width\",\n    options: {\n      filter: true,\n      sorte: true,\n      display: false\n    }\n  }, {\n    name: \"Description\",\n    options: {\n      filter: true,\n      sort: true,\n      display: false\n    }\n  }, {\n    name: \"Action\",\n    options: {\n      filter: false,\n      sort: false,\n      empty: true,\n      download: false,\n      customBodyRender: function customBodyRender(value, tableMeta, updateValue) {\n        return __jsx(ButtonGroup, {\n          color: \"primary\",\n          \"aria-label\": \"outlined button group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, __jsx(Button, {\n          onClick: function onClick() {\n            return editProduct(tableMeta.rowData[0]);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, \"Edit\"), __jsx(Button, {\n          onClick: function onClick() {\n            return confirmDelete(tableMeta.rowData[0]);\n          },\n          color: \"secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, \"Delete\"));\n      }\n    }\n  }];\n\n  function fetchData() {\n    var response;\n    return _regeneratorRuntime.async(function fetchData$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return _regeneratorRuntime.awrap(fetcher(\"/products\"));\n\n          case 2:\n            response = _context7.sent;\n            console.log(\"a\" + response);\n            _context7.t0 = setTableData;\n            _context7.next = 7;\n            return _regeneratorRuntime.awrap(handleData(response));\n\n          case 7:\n            _context7.t1 = _context7.sent;\n            (0, _context7.t0)(_context7.t1);\n\n          case 9:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    });\n  }\n\n  useEffect(function () {\n    fetchData();\n  }, []);\n  return __jsx(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, __jsx(ModalEdit, {\n    open: openModal,\n    setOpen: setOpenModal,\n    types: types,\n    item: itemSelected,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }), __jsx(MuiThemeProvider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, __jsx(MUIDataTable, {\n    title: \"Products List\",\n    data: tableData,\n    columns: columns,\n    options: options,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  })), __jsx(Dialog, {\n    open: openDialog,\n    onClose: handleCloseDialog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, __jsx(DialogTitle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, \"Delete\"), __jsx(DialogContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, __jsx(DialogContentText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, \"Are you sure you want to delete this product?\")), __jsx(DialogActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, __jsx(Button, (_jsx = {\n    color: \"error\",\n    autoFocus: true,\n    onClick: handleCloseDialog\n  }, _defineProperty(_jsx, \"color\", \"primary\"), _defineProperty(_jsx, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 201\n  }), _defineProperty(_jsx, \"__self\", this), _jsx), \"Cancel\"), __jsx(Button, (_jsx2 = {\n    color: \"success\",\n    onClick: deleteProduct\n  }, _defineProperty(_jsx2, \"color\", \"primary\"), _defineProperty(_jsx2, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 204\n  }), _defineProperty(_jsx2, \"__self\", this), _jsx2), \"Confirm\"))), __jsx(Snackbar, {\n    open: openSnackSuccess,\n    autoHideDuration: 3000,\n    onClose: handleCloseSnackSuccess,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, __jsx(Alert, {\n    severity: \"success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, \"Sucess! The product was succesfully deleted!\")));\n}\n;","map":{"version":3,"sources":["/home/tcostaz1/Documentos/DEV/fullstack-challenge-06/dashboard/components/Table.js"],"names":["React","useEffect","useState","Button","ButtonGroup","Container","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Snackbar","Delete","MUIDataTable","createMuiTheme","MuiThemeProvider","ModalEdit","api","fetch","useSWR","moment","MuiAlert","Alert","props","API_URL","fetcher","path","res","json","options","print","selectableRows","responsive","TableProducts","tableData","setTableData","openDialog","setOpenDialog","itemSelected","setItemSelected","openModal","setOpenModal","types","setTypes","openSnackSuccess","setOpenSnack","handleData","data","arr","arrType","forEach","el","push","type","_id","title","rating","price","createdAt","format","height","width","description","confirmDelete","id","handleOpenSnack","handleCloseSnackSuccess","console","log","editProduct","handleCloseDialog","deleteProduct","columns","name","display","download","filter","sort","sorte","empty","customBodyRender","value","tableMeta","updateValue","rowData","fetchData","response"],"mappings":"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","sourcesContent":["import React, {useEffect,useState} from 'react'\nimport {Button,ButtonGroup,Container,Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle,Snackbar} from '@material-ui/core';\nimport { Delete } from '@material-ui/icons';\nimport MUIDataTable from \"mui-datatables\";\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport ModalEdit from './ModalEdit';\nimport api from '../services/api'\nimport fetch from 'unfetch'\nimport useSWR from 'swr'\nimport moment from 'moment'\nimport MuiAlert from '@material-ui/lab/Alert';\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\nconst API_URL = 'http://localhost:3001'\nasync function fetcher(path) {\n  const res = await fetch(API_URL + path)\n  const json = await res.json();\n  return json;\n}\n\nconst options = {\n  print:false,\n  selectableRows:false,\n  responsive:'stacked'\n};\n \nexport default function TableProducts() {\n  const [tableData, setTableData] = useState([]);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [itemSelected, setItemSelected] = useState('');\n  const [openModal, setOpenModal] = useState(false);\n  const [types, setTypes] = useState([]);\n  const [openSnackSuccess, setOpenSnack] = useState(false);\n\n      async function handleData(data) {\n        let arr = [];\n        let arrType = [];\n        data.forEach(el => {\n          arrType.push(el.type);\n          arr.push([\n            el._id,\n            el.title,\n            el.type,\n            el.rating,\n            el.price,\n            moment(el.createdAt).format('YYYY-MM-DD HH:mm:ss'),\n            el.height,\n            el.width,\n            el.description,\n          ])\n        });\n        setTypes([...new Set(arrType)])\n        return arr;\n      }\n      async function confirmDelete(id){\n        setItemSelected(id);\n        setOpenDialog(true);\n      };\n\n      const handleOpenSnack = () => {\n          setOpenSnack(true);\n      };\n\n      const handleCloseSnackSuccess = () => {\n          console.log(\"types\",types)\n          setOpenSnack(false);\n      };\n      async function editProduct(id) {\n        console.log(id)\n        setItemSelected(id);\n        setOpenModal(true);\n\n      };\n      async function handleCloseDialog(){\n        setOpenDialog(false);\n      };\n      async function deleteProduct(){\n        console.log(\"REMOVER PRODUTO\",itemSelected)\n        setOpenSnack(true)\n        setOpenDialog(false);\n      };\n     const columns = [\n\n      {\n        name: \"Id\",\n        options: {\n          display: false,\n          download:false\n        }\n      },\n      {\n        name: \"Title\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Type\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Rating\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Price\",\n        options: {\n          filter: true,\n        }\n      },\n      {\n        name: \"Created\",\n        options: {\n          filter: true,\n          sort: true,\n        }\n      },{\n        name: \"Height\",\n        options: {\n          filter: true,\n          sorte:true,\n          display:false\n        }\n      }, {\n        name: \"Width\",\n        options: {\n          filter: true,\n          sorte:true,\n          display:false\n        }\n      }, {\n        name: \"Description\",\n        options: {\n          filter: true,\n          sort: true,\n          display:false\n        }\n      },\n      {\n        name: \"Action\",\n        options: {\n          filter: false,\n          sort: false,\n          empty: true,\n          download:false,\n          customBodyRender: (value, tableMeta, updateValue) => {\n            return (\n              <ButtonGroup color=\"primary\" aria-label=\"outlined button group\">\n                <Button onClick={() => editProduct(tableMeta.rowData[0])} >Edit</Button>\n                <Button onClick={() => confirmDelete(tableMeta.rowData[0])} color=\"secondary\">Delete</Button>\n              </ButtonGroup>\n\n            );\n          }\n        }\n      },\n    ];\n  async function fetchData() {\n    // You can await here\n    const response = await fetcher(`/products`);\n    console.log(\"a\" + response)\n    setTableData(await handleData(response));\n  }\n  useEffect(() => {\n\n      fetchData();\n     \n  }, []);\n  return (\n    \n    <Container>\n      <ModalEdit open={openModal} setOpen={setOpenModal} types={types} item={itemSelected}/>\n      <MuiThemeProvider>\n        <MUIDataTable \n          title={\"Products List\"} \n          data={tableData} \n          columns={columns} \n          options={options} \n        />\n      </MuiThemeProvider>\n\n      <Dialog\n        open={openDialog}\n        onClose={handleCloseDialog}\n      >\n        <DialogTitle >\n         Delete\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Are you sure you want to delete this product?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button color=\"error\" autoFocus onClick={handleCloseDialog} color=\"primary\">\n            Cancel\n          </Button>\n          <Button color=\"success\" onClick={deleteProduct} color=\"primary\">\n            Confirm\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <Snackbar open={openSnackSuccess} autoHideDuration={3000} onClose={handleCloseSnackSuccess} >\n          <Alert  severity=\"success\">\n              Sucess! The product was succesfully deleted!\n          </Alert>\n      </Snackbar>\n    </Container>\n  )\n};\n\n"]},"metadata":{},"sourceType":"module"}